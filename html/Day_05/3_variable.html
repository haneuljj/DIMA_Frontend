<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>변수 선언과 Scope</title>
</head>
<body>
    <h2>변수의 선언과 Scope</h2>
    <p>출력 결과는 콘솔창에서 확인</p>
    <p>
        자바스크립트: Weakly typed language; 변수 선언 후 다른 데이터 타입을 대입해도 상관없음<br>
        자바: Strongly typed language; 문법이 엄격한 언어
    </p>

    <script>
        // 변수 선언 방식
        // var(사용 비권장), let, const(let보다 더 권장, constant(final))

        var a = "스물";
        var a = "이십"; // var: 이름이 중복되고 값이 바뀌어도 오류가 안남, 아래쪽 코드가 우선
        
        let b = "서른";
        // let b = "30"; // let: 오류, 선언했던 이름으로 또 선언할 수 없음
        b = 30; // 선언이 아닌 다른 값을 할당하는 것은 가능

        const c = "마흔"; // 상수값 
        // c = 40; // 오류, 변수의 값을 바꿀 수 없음
        
        function add(a,b) {
            let result = a + b; // result의 scope은 함수 내부에서만 사용 가능
            console.log('합계: ' + result);
        }

        add(10, 20);
        // console.log(result); // 오류, result는 정의되지 않은 변수

        let total = 0;
        for(let i=1; i<=10; ++i) {  // i는 지역변수
            total += i;
        }

        console.log("1~10까지의 합계: " + total);
        // console.log("마지막 i값 " + i);

        console.log("---------------------------");
        let x = 20; // 전역공간의 변수
        {
            let x = 10; // 지역공간의 변수
            console.log(x); // 지역공간의 x변수 출력
        }

        console.log(x); // 전역공간의 x변수 출력

        console.log("---------------------------");
        let y = 20;
        {
            y = 10;  // 전역공간의 y 변수를 사용해서 전역의 y변수 값 바꿈
            console.log(y); // 전역공간 y 출력 (바뀐값)
        }

        console.log(y); // 전역공간 y 출력 (바뀐값)

        /*
            JavaScript Scope의 개념
            - global, local
            1)
            - 지역공간 안에서는 바깥공간(global공간)에 접근 가능
            - 그러나 반대는 불가능 (closer로 가능은 하지만)

            2)
            - 지역변수는 전역변수보다 우선순위가 높다
            - 우선순위를 확실히 하도록 코드 작성하는 것이 바람직

            3)
            - arrow function (화살표 함수)는 scope의 개념이 없다
        */

        console.log("---------------------------");
        const k = 20;
        const l = {x:10, y:20};
        // l = {x:100, y:200}; 오류, const는 다른 데이터를 가리킬 수 없음

        l['x'] = 100; // l안에 있는 값은 const가 아니라서 바꿀 수 있음
        console.log(l);
    </script>
</body>
</html>